<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Migration Guides/migrating-from-v3-1-to-v3-2" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">Migrating from v3.1 to v3.2 | Discord4J</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://discord4j.com/migrating-from-v3-1-to-v3-2"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Migrating from v3.1 to v3.2 | Discord4J"><meta data-rh="true" name="description" content="This article should help you update your bot from Discord4J v3.1.x to v3.2.0. This new major release is over a year"><meta data-rh="true" property="og:description" content="This article should help you update your bot from Discord4J v3.1.x to v3.2.0. This new major release is over a year"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://discord4j.com/migrating-from-v3-1-to-v3-2"><link data-rh="true" rel="alternate" href="https://discord4j.com/migrating-from-v3-1-to-v3-2" hreflang="en"><link data-rh="true" rel="alternate" href="https://discord4j.com/migrating-from-v3-1-to-v3-2" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://C7ZMMWOOHU-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-100029628-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-100029628-1",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Discord4J" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.f8f5dca9.css">
<script src="/assets/js/runtime~main.a61b7613.js" defer="defer"></script>
<script src="/assets/js/main.dd0e6ff0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Discord4J Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Discord4J Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Discord4J</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Welcome to Discord4J Docs!</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quickstart">Quickstart</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/discord-application-tutorial">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/interactions/application-commands">How-to Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/examples">Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/lambda-tutorial">Conceptual Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/migrating-from-v2-x-to-v3-1">Migration Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/migrating-from-v2-x-to-v3-1">Migrating from v2.x to v3.1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/migrating-from-v3-0-to-v3-1">Migrating from v3.0 to v3.1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/migrating-from-v3-1-to-v3-2">Migrating from v3.1 to v3.2</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Migration Guides</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Migrating from v3.1 to v3.2</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Migrating from v3.1 to v3.2</h1></header><p>This article should help you update your bot from Discord4J v3.1.x to v3.2.0. This new major release is over a year
in the making and has lots of changes.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="before-you-start">Before you start<a href="#before-you-start" class="hash-link" aria-label="Direct link to Before you start" title="Direct link to Before you start">​</a></h2>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>If you encounter an issue while following this guide or discover something missing, feel free to suggest changes or discuss them in our <a href="https://discord.gg/d4j" target="_blank" rel="noopener noreferrer">server</a>. Thanks!</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="updating-dependencies">Updating dependencies<a href="#updating-dependencies" class="hash-link" aria-label="Direct link to Updating dependencies" title="Direct link to Updating dependencies">​</a></h2>
<p>Discord4J v3.2 depends on Reactor 2020 release train (<a href="https://github.com/reactor/reactor-core" target="_blank" rel="noopener noreferrer">Reactor Core</a> 3.4.x and <a href="https://github.com/reactor/reactor-netty" target="_blank" rel="noopener noreferrer">Reactor Netty</a> 1.0.x). It maintains the JDK 8 baseline and includes other dependency upgrades like:</p>
<ul>
<li>discord-json 1.6 (from 1.5)</li>
<li>jackson-databind 2.12 (from 2.11)</li>
<li>caffeine 2.8 (new dependency)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="gradle">Gradle<a href="#gradle" class="hash-link" aria-label="Direct link to Gradle" title="Direct link to Gradle">​</a></h3>
<div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token plain">repositories </span><span class="token punctuation" style="color:#a9b7c6">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">  </span><span class="token function" style="color:#ffc66d">mavenCentral</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain"></span><span class="token punctuation" style="color:#a9b7c6">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">dependencies </span><span class="token punctuation" style="color:#a9b7c6">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">  implementation </span><span class="token string" style="color:#6a8759">&#x27;com.discord4j:discord4j-core:3.2.0&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain"></span><span class="token punctuation" style="color:#a9b7c6">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="maven">Maven<a href="#maven" class="hash-link" aria-label="Direct link to Maven" title="Direct link to Maven">​</a></h3>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token tag punctuation" style="color:#a9b7c6">&lt;</span><span class="token tag" style="color:#e8bf6a">dependencies</span><span class="token tag punctuation" style="color:#a9b7c6">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token tag punctuation" style="color:#a9b7c6">&lt;</span><span class="token tag" style="color:#e8bf6a">dependency</span><span class="token tag punctuation" style="color:#a9b7c6">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token tag punctuation" style="color:#a9b7c6">&lt;</span><span class="token tag" style="color:#e8bf6a">groupId</span><span class="token tag punctuation" style="color:#a9b7c6">&gt;</span><span class="token plain">com.discord4j</span><span class="token tag punctuation" style="color:#a9b7c6">&lt;/</span><span class="token tag" style="color:#e8bf6a">groupId</span><span class="token tag punctuation" style="color:#a9b7c6">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token tag punctuation" style="color:#a9b7c6">&lt;</span><span class="token tag" style="color:#e8bf6a">artifactId</span><span class="token tag punctuation" style="color:#a9b7c6">&gt;</span><span class="token plain">discord4j-core</span><span class="token tag punctuation" style="color:#a9b7c6">&lt;/</span><span class="token tag" style="color:#e8bf6a">artifactId</span><span class="token tag punctuation" style="color:#a9b7c6">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token tag punctuation" style="color:#a9b7c6">&lt;</span><span class="token tag" style="color:#e8bf6a">version</span><span class="token tag punctuation" style="color:#a9b7c6">&gt;</span><span class="token plain">3.2.0</span><span class="token tag punctuation" style="color:#a9b7c6">&lt;/</span><span class="token tag" style="color:#e8bf6a">version</span><span class="token tag punctuation" style="color:#a9b7c6">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token tag punctuation" style="color:#a9b7c6">&lt;/</span><span class="token tag" style="color:#e8bf6a">dependency</span><span class="token tag punctuation" style="color:#a9b7c6">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain"></span><span class="token tag punctuation" style="color:#a9b7c6">&lt;/</span><span class="token tag" style="color:#e8bf6a">dependencies</span><span class="token tag punctuation" style="color:#a9b7c6">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="discord4j-features">Discord4J features<a href="#discord4j-features" class="hash-link" aria-label="Direct link to Discord4J features" title="Direct link to Discord4J features">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="gateway-intents">Gateway Intents<a href="#gateway-intents" class="hash-link" aria-label="Direct link to Gateway Intents" title="Direct link to Gateway Intents">​</a></h3>
<p>The intent system is now mandatory in the Gateway version used with v3.2. To retain the previous behavior, use <code>setEnabledIntents(IntentSet.all())</code> when building a Gateway-capable client. For more information about this feature check <a href="https://discord.com/developers/docs/topics/gateway#gateway-intents" target="_blank" rel="noopener noreferrer">official docs</a>.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token class-name">GatewayDiscordClient</span><span class="token plain"> client </span><span class="token operator" style="color:#a9b7c6">=</span><span class="token plain"> </span><span class="token class-name">DiscordClient</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">create</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">System</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getenv</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;token&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">gateway</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">setEnabledIntents</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">IntentSet</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">all</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">login</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">block</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Otherwise the default will be <code>IntentSet.nonPrivileged()</code>. Discord might be changing the set of non-privileged intents in the future, particularly message create <a href="https://support-dev.discord.com/hc/en-us/articles/4404772028055" target="_blank" rel="noopener noreferrer">becoming privileged in 2022</a>.</p>
<p>If you get an error such as <code>WebSocket closed: 4014 Disallowed intent(s)</code>, make sure you&#x27;re allowed to use the intents you enabled, this can be done in your developer portal bot page, look for <strong>Privileged Gateway Intents</strong>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-entity-cache-api">New entity cache API<a href="#new-entity-cache-api" class="hash-link" aria-label="Direct link to New entity cache API" title="Direct link to New entity cache API">​</a></h3>
<p>One of the most notable change is the way our <code>Store</code> abstraction works for entity caching. If you use a custom <code>StoreService</code>, for quick migration you need to adapt it in this way:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token class-name">GatewayDiscordClient</span><span class="token plain"> client </span><span class="token operator" style="color:#a9b7c6">=</span><span class="token plain"> </span><span class="token class-name">DiscordClient</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">create</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">System</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getenv</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;token&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">gateway</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">setStore</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">Store</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">fromLayout</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">LegacyStoreLayout</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">of</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">myStoreService</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">login</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">block</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Where <code>myStoreService</code> is what you used previously, for instance:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token class-name">StoreService</span><span class="token plain"> myStoreService </span><span class="token operator" style="color:#a9b7c6">=</span><span class="token plain"> </span><span class="token class-name">MappingStoreService</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">create</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">setMapping</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token keyword" style="color:#cc7832">new</span><span class="token plain"> </span><span class="token class-name">NoOpStoreService</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token class-name">MessageData</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token keyword" style="color:#cc7832">class</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">setFallback</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token keyword" style="color:#cc7832">new</span><span class="token plain"> </span><span class="token class-name">JdkStoreService</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-bot-presence-api">New bot presence API<a href="#new-bot-presence-api" class="hash-link" aria-label="Direct link to New bot presence API" title="Direct link to New bot presence API">​</a></h3>
<p>After <a href="https://github.com/Discord4J/Discord4J/pull/874" target="_blank" rel="noopener noreferrer">#874</a>, you have to update how bot presence is set when connecting and updated:</p>
<ul>
<li>Use <code>ClientPresence</code> instead of <code>Presence</code></li>
<li>Use <code>ClientActivity</code> instead of <code>Activity</code></li>
<li>Prefer calling <code>setInitialPresence</code> over <code>setInitialStatus</code></li>
<li>This also affects methods like <code>GatewayDiscordClient::updatePresence</code></li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token class-name">DiscordClient</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">create</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">System</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getenv</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;token&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">gateway</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">setInitialPresence</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">s </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> </span><span class="token class-name">ClientPresence</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">invisible</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">withGateway</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">client </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> client</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">on</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">ReadyEvent</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token keyword" style="color:#cc7832">class</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">                </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">doOnNext</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">ready </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> log</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">info</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;Logged in as {}&quot;</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> ready</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getSelf</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getUsername</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">                </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">then</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">block</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-request-spec-api">New request spec API<a href="#new-request-spec-api" class="hash-link" aria-label="Direct link to New request spec API" title="Direct link to New request spec API">​</a></h3>
<p>A large effort was introduced in <a href="https://github.com/Discord4J/Discord4J/pull/927" target="_blank" rel="noopener noreferrer">#927</a> that provides different patterns of building and executing API requests to Discord. This addresses some issues of the <code>Consumer</code>-based specs when used for templating, and allows more fluent calls for convenience.</p>
<p>Consider the following example of spec usage in 3.1.x:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token plain">channel</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">createMessage</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">msg </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#a9b7c6">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">  msg</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">setContent</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;Hello @everyone&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">  msg</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">setAllowedMentions</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">AllowedMentions</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">suppressEveryone</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">  msg</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">addEmbed</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">embed </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#a9b7c6">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    embed</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">setTitle</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;Foo&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    embed</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">addField</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;Bar&quot;</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token string" style="color:#6a8759">&quot;Baz&quot;</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token boolean" style="color:#cc7832">false</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    embed</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">setColor</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">Color</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token constant" style="color:#9876aa">BLUE</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">  </span><span class="token punctuation" style="color:#a9b7c6">}</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain"></span><span class="token punctuation" style="color:#a9b7c6">}</span><span class="token punctuation" style="color:#a9b7c6">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>createMessage</code> method takes a <code>Consumer&lt;MessageCreateSpec&gt;</code>. In other words, the spec is &quot;given to you&quot; by the
method, and you mutate that spec to put it in the state you want. While it works well, this pattern was often confusing
to users, most notably because you couldn&#x27;t ever really &quot;hold&quot; a spec. It was a kind of ephemeral thing that could only
be given to you in these mutating Consumers.</p>
<p>In 3.2, we sought to &quot;materialize&quot; specs. Specs are now immutable data carriers that can be built in a few different
ways. The way you pick is purely up to your preference.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="builder">Builder<a href="#builder" class="hash-link" aria-label="Direct link to Builder" title="Direct link to Builder">​</a></h4>
<p>The most obvious way to build an object in Java is the builder pattern. This works exactly how you think it would.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token plain">channel</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">createMessage</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">MessageCreateSpec</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">builder</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">  </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">content</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;Hello @everyone&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">  </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">allowedMentions</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">AllowedMentions</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">suppressEveryone</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">  </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">addEmbed</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">EmbedCreateSpec</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">builder</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">title</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;Foo&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">addField</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;Bar&quot;</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token string" style="color:#6a8759">&quot;Baz&quot;</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token boolean" style="color:#cc7832">false</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">color</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">Color</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token constant" style="color:#9876aa">BLUE</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">build</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">  </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">build</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Any spec, <code>SomeSpec</code>, has a static method <code>SomeSpec.builder()</code> which will return a <code>SomeSpec.Builder</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="withers">Withers<a href="#withers" class="hash-link" aria-label="Direct link to Withers" title="Direct link to Withers">​</a></h4>
<p>In addition to a builder, all specs come equipped with &quot;wither&quot; (or <code>withX</code>) methods that return a copy of the current
spec with a modified field. The above example could be equivalently written as...</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token plain">channel</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">createMessage</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">MessageCreateSpec</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">create</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">  </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">withContent</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;Hello @everyone&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">  </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">withAllowedMentions</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">AllowedMentions</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">suppressEveryone</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">  </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">withEmbeds</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">EmbedCreateSpec</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">create</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">withTitle</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;Foo&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">withFields</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">EmbedCreateFields</span><span class="token class-name punctuation" style="color:#a9b7c6">.</span><span class="token class-name">Field</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">of</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;Bar&quot;</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token string" style="color:#6a8759">&quot;Baz&quot;</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token boolean" style="color:#cc7832">false</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">withColor</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">Color</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token constant" style="color:#9876aa">BLUE</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Similar to <code>builder()</code>, specs also have a static <code>create()</code> method that returns a minimal, default spec which can be
modified using the wither methods.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="fluent-publishers">Fluent Publishers<a href="#fluent-publishers" class="hash-link" aria-label="Direct link to Fluent Publishers" title="Direct link to Fluent Publishers">​</a></h4>
<p>Finally, most methods that accept specs also have a parameter-less (or minimal parameters) overload that instead returns
a special <code>Mono</code> or <code>Flux</code>. These publishers have methods corresponding to each property of the spec. This allows for
fluent calls to these methods.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token plain">channel</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">createMessage</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;Hello @everyone&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">  </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">withAllowedMentions</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">AllowedMentions</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">suppressEveryone</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">  </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">withEmbeds</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">EmbedCreateSpec</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">create</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">withTitle</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;Foo&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">withFields</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">EmbedCreateFields</span><span class="token class-name punctuation" style="color:#a9b7c6">.</span><span class="token class-name">Field</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">of</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;Bar&quot;</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token string" style="color:#6a8759">&quot;Baz&quot;</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token boolean" style="color:#cc7832">false</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">withColor</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">Color</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token constant" style="color:#9876aa">BLUE</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For a supported spec, <code>SomeActionSpec</code>, there will be a corresponding publisher <code>SomeAction(Mono/Flux)</code>. Note that this
isn&#x27;t supported for all specs. As you can see above, the parameter to <code>withEmbeds</code> isn&#x27;t included in the surrounding
fluent chain (and we could have chosen to use a builder there if we wanted).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="legacy-specs">Legacy Specs<a href="#legacy-specs" class="hash-link" aria-label="Direct link to Legacy Specs" title="Direct link to Legacy Specs">​</a></h4>
<p>To aide migration, we will continue to support the previous spec behavior in 3.2. The old (&quot;legacy&quot;) specs have been
moved to <code>discord4j.core.spec.legacy</code>, and had <code>Legacy</code> prepended to their names. For example, 3.1&#x27;s
<code>discord4j.core.spec.MessageCreateSpec</code> is now <code>discord4j.core.spec.legacy.LegacyMessageCreateSpec</code> in 3.2.</p>
<p>This means that any code using specs like <code>foo(spec -&gt; ...)</code> will continue to work without issues, but if you directly
imported a spec class, you will need to update the package, as it was moved to <code>discord4j.core.spec.legacy</code> package and
all <code>XxSpec</code> classes were deprecated and renamed to <code>LegacyXxSpec</code>.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>These legacy specs are deprecated. They exist only to make migration a bit easier, and they <em>will</em> be removed in a
future version. Please let us know if the current alternatives are not a good fit for your use case.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="interactions">Interactions<a href="#interactions" class="hash-link" aria-label="Direct link to Interactions" title="Direct link to Interactions">​</a></h3>
<p>This feature is under development from Discord therefore we have marked it as <strong>Experimental</strong>, meaning breaking changes can happen between minor versions (in D4J that is from x.y.z to x.y.z+1). A new hierarchy was introduced after the inclusion of context menus in <a href="https://github.com/Discord4J/Discord4J/pull/1001" target="_blank" rel="noopener noreferrer">#1001</a></p>
<ul>
<li>Event<!-- -->
<ul>
<li>InteractionCreateEvent<!-- -->
<ul>
<li>ApplicationCommandInteractionEvent<!-- -->
<ul>
<li>ChatInputInteractionEvent</li>
<li>MessageInteractionEvent</li>
<li>UserInteractionEvent</li>
</ul>
</li>
<li>ComponentInteractionEvent<!-- -->
<ul>
<li>ButtonInteractionEvent</li>
<li>SelectMenuInteractionEvent</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="renamed-interaction-types">Renamed interaction types<a href="#renamed-interaction-types" class="hash-link" aria-label="Direct link to Renamed interaction types" title="Direct link to Renamed interaction types">​</a></h4>
<p>The following versions are affected and need to migrate to these types when upgrading:</p>
<ul>
<li>v3.1.7</li>
<li>v3.2.0-RC3</li>
</ul>
<table><thead><tr><th>Previous</th><th>New</th></tr></thead><tbody><tr><td>SlashCommandEvent</td><td>ChatInputInteractionEvent</td></tr><tr><td>ComponentInteractEvent</td><td>ComponentInteractionEvent</td></tr><tr><td>ButtonInteractEvent</td><td>ButtonInteractionEvent</td></tr><tr><td>SelectMenuInteractEvent</td><td>SelectMenuInteractionEvent</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="webhook-execution">Webhook execution<a href="#webhook-execution" class="hash-link" aria-label="Direct link to Webhook execution" title="Direct link to Webhook execution">​</a></h4>
<p>Interactions use the webhook execution feature under the hood that was backported from v3.2 to v3.1. In particular, if
you used <code>WebhookMultipartRequest</code> for your slash command application in v3.1 you now have to migrate to
<code>MultipartRequest&lt;WebhookExecuteRequest&gt;</code>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token class-name">WebhookMultipartRequest</span><span class="token plain"> request </span><span class="token operator" style="color:#a9b7c6">=</span><span class="token plain"> </span><span class="token keyword" style="color:#cc7832">new</span><span class="token plain"> </span><span class="token class-name">WebhookMultipartRequest</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">body</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Becomes one of these, depending on whether you include attachments to it or not:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token class-name">MultipartRequest</span><span class="token generics punctuation" style="color:#a9b7c6">&lt;</span><span class="token generics class-name">WebhookExecuteRequest</span><span class="token generics punctuation" style="color:#a9b7c6">&gt;</span><span class="token plain"> request </span><span class="token operator" style="color:#a9b7c6">=</span><span class="token plain"> </span><span class="token class-name">MultipartRequest</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">ofRequest</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">body</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain"></span><span class="token class-name">MultipartRequest</span><span class="token generics punctuation" style="color:#a9b7c6">&lt;</span><span class="token generics class-name">WebhookExecuteRequest</span><span class="token generics punctuation" style="color:#a9b7c6">&gt;</span><span class="token plain"> request </span><span class="token operator" style="color:#a9b7c6">=</span><span class="token plain"> </span><span class="token class-name">MultipartRequest</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">ofRequestAndFiles</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">body</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> files</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>However, starting from v3.2.0, it&#x27;s less likely you need to directly call <code>MultipartRequest</code> for interactions, as there
are <code>discord4j-core</code> methods available now, including the richer and fluent new request spec API:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token class-name">List</span><span class="token generics punctuation" style="color:#a9b7c6">&lt;</span><span class="token generics class-name">Tuple2</span><span class="token generics punctuation" style="color:#a9b7c6">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#a9b7c6">,</span><span class="token generics"> </span><span class="token generics class-name">InputStream</span><span class="token generics punctuation" style="color:#a9b7c6">&gt;</span><span class="token generics punctuation" style="color:#a9b7c6">&gt;</span><span class="token plain"> file </span><span class="token operator" style="color:#a9b7c6">=</span><span class="token plain"> </span><span class="token class-name">Collections</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">singletonList</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">Tuples</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">of</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;myAttachment.zip&quot;</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> inputStream</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain"></span><span class="token class-name">Mono</span><span class="token generics punctuation" style="color:#a9b7c6">&lt;</span><span class="token generics operator" style="color:#a9b7c6">?</span><span class="token generics punctuation" style="color:#a9b7c6">&gt;</span><span class="token plain"> edit </span><span class="token operator" style="color:#a9b7c6">=</span><span class="token plain"> press</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getInteractionResponse</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">editInitialResponse</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">MultipartRequest</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">ofRequestAndFiles</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">                </span><span class="token class-name">WebhookMessageEditRequest</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">builder</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">                        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">contentOrNull</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;Wow, a new attachment!&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">                        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">components</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">Collections</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">singletonList</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">row</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getData</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">                        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">build</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> file</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain"></span><span class="token keyword" style="color:#cc7832">return</span><span class="token plain"> press</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">acknowledge</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">then</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">edit</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Can now be migrated to new methods without relying on <code>getInteractionResponse()</code>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token class-name">MessageCreateFields</span><span class="token class-name punctuation" style="color:#a9b7c6">.</span><span class="token class-name">File</span><span class="token plain"> file </span><span class="token operator" style="color:#a9b7c6">=</span><span class="token plain"> </span><span class="token class-name">MessageCreateFields</span><span class="token class-name punctuation" style="color:#a9b7c6">.</span><span class="token class-name">File</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">of</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;myAttachment.zip&quot;</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> inputStream</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain"></span><span class="token class-name">Mono</span><span class="token generics punctuation" style="color:#a9b7c6">&lt;</span><span class="token generics operator" style="color:#a9b7c6">?</span><span class="token generics punctuation" style="color:#a9b7c6">&gt;</span><span class="token plain"> edit </span><span class="token operator" style="color:#a9b7c6">=</span><span class="token plain"> press</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">editReply</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">withContentOrNull</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;Wow, a new attachment!&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">withFiles</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">withComponents</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">row</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain"></span><span class="token keyword" style="color:#cc7832">return</span><span class="token plain"> press</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">deferEdit</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">then</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">edit</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This also applies to <code>event.getInteractionResponse().createFollowupResponse(...)</code> that is now available at
<code>event.createFollowup()</code> using the new APIs. For a summary of methods available under this new API,
see <a href="/interactions#method-summary">this section</a>.</p>
<p>To see the changes in action, check our <a href="/examples">Examples</a> page.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ephemeral-variants">Ephemeral variants<a href="#ephemeral-variants" class="hash-link" aria-label="Direct link to Ephemeral variants" title="Direct link to Ephemeral variants">​</a></h4>
<p>For example, to reply ephemerally to a command, the below code can now be used:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token comment" style="color:#808080">// event is a ChatInputInteractionEvent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">event</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">reply</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;Content!&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">withEphemeral</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token boolean" style="color:#cc7832">true</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">subscribe</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is now recommended over calling <code>*Ephemeral</code> methods.</p>
<p>For more information regarding how to respond to slash commands with the new method, see <a href="/interactions/application-commands#responding-to-commands">Application Commands - Responding</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-features">Advanced features<a href="#advanced-features" class="hash-link" aria-label="Direct link to Advanced features" title="Direct link to Advanced features">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="directly-querying-a-store">Directly querying a store<a href="#directly-querying-a-store" class="hash-link" aria-label="Direct link to Directly querying a store" title="Direct link to Directly querying a store">​</a></h3>
<p>The recommended way is using <code>EntityRetrievalStrategy.STORE</code> for methods that support it. However if it&#x27;s not available for your use case and used <code>StateView</code> before, you now have to migrate to querying a <code>Store</code> directly, available from <code>GatewayResources</code>.</p>
<p>This abstraction is now focused on query objects, named <code>ReadActions</code>. A quick example to get the cached user count:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token comment" style="color:#808080">// client is a GatewayDiscordClient instance</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain"></span><span class="token class-name">Store</span><span class="token plain"> store </span><span class="token operator" style="color:#a9b7c6">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getGatewayResources</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getStore</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain"></span><span class="token keyword" style="color:#cc7832">long</span><span class="token plain"> userCount </span><span class="token operator" style="color:#a9b7c6">=</span><span class="token plain"> </span><span class="token class-name">Mono</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">from</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">store</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">execute</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">ReadActions</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">countUsers</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">block</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="customizing-a-storelayout">Customizing a <code>StoreLayout</code><a href="#customizing-a-storelayout" class="hash-link" aria-label="Direct link to customizing-a-storelayout" title="Direct link to customizing-a-storelayout">​</a></h3>
<p>The entity cache from v3.1 set a structure that&#x27;s too rigid for some implementations, so a new interface <code>StoreLayout</code> was created to abstract the read/write process that bots needs to handle when connecting to the Discord Gateway to maintain a cache. v3.2 now defaults to <code>Store.fromLayout(LocalStoreLayout.create())</code> as the new in-memory entity cache.</p>
<p>A <code>LocalStoreLayout</code> configures a set of defaults as well through <code>StorageConfig</code>:</p>
<ul>
<li>Since messages have a larger storage footprint, a <a href="https://github.com/ben-manes/caffeine" target="_blank" rel="noopener noreferrer">Caffeine</a> cache <code>StorageBackend</code> is set to 1000 of the most recent messages</li>
<li>Set to remove all content under stale cache conditions like a non-resumable reconnect or logout</li>
</ul>
<p>These options can be configured through a builder using: <code>LocalStoreLayout.create(StorageConfig.builder().build())</code></p>
<p>For an example implementation beyond what&#x27;s built-in, check this project from Discord4J contributor @napstr: <a href="https://github.com/CapybaraLabs/d4j-postgres-store" target="_blank" rel="noopener noreferrer">https://github.com/CapybaraLabs/d4j-postgres-store</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-features">Other features<a href="#other-features" class="hash-link" aria-label="Direct link to Other features" title="Direct link to Other features">​</a></h3>
<p>Check more details about the API and behavior changes in <a href="/whats-new-in-v3-2">What&#x27;s new in v3.2</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/Discord4J/documentation/edit/master/docs/07-Migration Guides/migrating-from-v3-1-to-v3-2.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2021-10-17T19:19:56.000Z" itemprop="dateModified">Oct 17, 2021</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/migrating-from-v3-0-to-v3-1"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Migrating from v3.0 to v3.1</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#before-you-start" class="table-of-contents__link toc-highlight">Before you start</a></li><li><a href="#updating-dependencies" class="table-of-contents__link toc-highlight">Updating dependencies</a><ul><li><a href="#gradle" class="table-of-contents__link toc-highlight">Gradle</a></li><li><a href="#maven" class="table-of-contents__link toc-highlight">Maven</a></li></ul></li><li><a href="#discord4j-features" class="table-of-contents__link toc-highlight">Discord4J features</a><ul><li><a href="#gateway-intents" class="table-of-contents__link toc-highlight">Gateway Intents</a></li><li><a href="#new-entity-cache-api" class="table-of-contents__link toc-highlight">New entity cache API</a></li><li><a href="#new-bot-presence-api" class="table-of-contents__link toc-highlight">New bot presence API</a></li><li><a href="#new-request-spec-api" class="table-of-contents__link toc-highlight">New request spec API</a></li><li><a href="#interactions" class="table-of-contents__link toc-highlight">Interactions</a></li></ul></li><li><a href="#advanced-features" class="table-of-contents__link toc-highlight">Advanced features</a><ul><li><a href="#directly-querying-a-store" class="table-of-contents__link toc-highlight">Directly querying a store</a></li><li><a href="#customizing-a-storelayout" class="table-of-contents__link toc-highlight">Customizing a <code>StoreLayout</code></a></li><li><a href="#other-features" class="table-of-contents__link toc-highlight">Other features</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Discord4J Docs</a></li><li class="footer__item"><a href="https://javadoc.io/doc/com.discord4j/discord4j-core" target="_blank" rel="noopener noreferrer" class="footer__link-item">Javadocs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Discord4J/Discord4J" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://projectreactor.io/docs/core/release/reference/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reactor Reference Guide<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.com/developers/docs/intro" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/d4j" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item">
              <a href="https://www.netlify.com">
                <img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="Deploys by Netlify">
              </a>
              </li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2015 - 2024 Discord4J - Licensed under LGPLv3.</div></div></div></footer></div>
</body>
</html>