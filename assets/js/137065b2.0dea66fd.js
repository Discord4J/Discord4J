"use strict";(self.webpackChunkdiscord4j_documentation=self.webpackChunkdiscord4j_documentation||[]).push([[825],{2267:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});var i=t(4848),s=t(8453);const a={id:"whats-new-in-v3-1",title:"What's new in v3.1",sidebar_label:"What's new in v3.1",slug:"/whats-new-in-v3-1"},o=void 0,r={id:"Reference/whats-new-in-v3-1",title:"What's new in v3.1",description:"Welcome to this next major release in Discord4J, a reactive wrapper library for the Discord REST API and real-time Bot Gateway with voice capabilities.",source:"@site/docs/05-Reference/whats-new-in-v3.1.mdx",sourceDirName:"05-Reference",slug:"/whats-new-in-v3-1",permalink:"/whats-new-in-v3-1",draft:!1,unlisted:!1,editUrl:"https://github.com/Discord4J/documentation/edit/master/docs/05-Reference/whats-new-in-v3.1.mdx",tags:[],version:"current",lastUpdatedAt:163120654e4,frontMatter:{id:"whats-new-in-v3-1",title:"What's new in v3.1",sidebar_label:"What's new in v3.1",slug:"/whats-new-in-v3-1"},sidebar:"mySidebar",previous:{title:"Versions",permalink:"/versions"},next:{title:"What's new in v3.2",permalink:"/whats-new-in-v3-2"}},d={},c=[{value:"Maintenance mode for v3.0",id:"maintenance-mode-for-v30",level:2},{value:"Architectural changes",id:"architectural-changes",level:2},{value:"DiscordClient is split from Gateway actions",id:"discordclient-is-split-from-gateway-actions",level:3},{value:"Shard group creates a GatewayDiscordClient",id:"shard-group-creates-a-gatewaydiscordclient",level:3},{value:"One EventDispatcher publishes for a shard group",id:"one-eventdispatcher-publishes-for-a-shard-group",level:3},{value:"Caches are shared across a shard group",id:"caches-are-shared-across-a-shard-group",level:3},{value:"Important API changes",id:"important-api-changes",level:2},{value:"Promote <code>Snowflake</code> class to common module",id:"promote-snowflake-class-to-common-module",level:3},{value:"Behavior changes",id:"behavior-changes",level:2},{value:"Login completes on connect instead of disconnect",id:"login-completes-on-connect-instead-of-disconnect",level:3},{value:"Spec code is run on subscription time",id:"spec-code-is-run-on-subscription-time",level:3},{value:"New features",id:"new-features",level:2},{value:"Gateway intents support",id:"gateway-intents-support",level:3},{value:"Wait until Gateway connections are ready",id:"wait-until-gateway-connections-are-ready",level:3},{value:"Custom EventDispatcher",id:"custom-eventdispatcher",level:3},{value:"Entity retrieval strategy",id:"entity-retrieval-strategy",level:3},{value:"Custom Reactor resources used by REST, Gateway and Voice",id:"custom-reactor-resources-used-by-rest-gateway-and-voice",level:3},{value:"Guild member request behavior",id:"guild-member-request-behavior",level:3},{value:"On-demand guild member request (lazy loading)",id:"on-demand-guild-member-request-lazy-loading",level:3},{value:"REST-only entities",id:"rest-only-entities",level:3},{value:"Normalized internal data representation",id:"normalized-internal-data-representation",level:3},{value:"ShardCoordinator abstraction",id:"shardcoordinator-abstraction",level:3},{value:"More sharding configurations supported",id:"more-sharding-configurations-supported",level:3},{value:"Improved rate limiting implementations",id:"improved-rate-limiting-implementations",level:3},{value:"Custom maximum missed heartbeat ACK",id:"custom-maximum-missed-heartbeat-ack",level:3},{value:"Custom Voice Gateway connection factory",id:"custom-voice-gateway-connection-factory",level:3},{value:"Custom Gateway invalidation strategy",id:"custom-gateway-invalidation-strategy",level:3},{value:"Custom Gateway destroy handler",id:"custom-gateway-destroy-handler",level:3},{value:"Custom Gateway to Event mapping",id:"custom-gateway-to-event-mapping",level:3},{value:"Custom or extend Gateway configuration",id:"custom-or-extend-gateway-configuration",level:3},{value:"API changes",id:"api-changes",level:2},{value:"Signature changes",id:"signature-changes",level:3},{value:"DiscordClient",id:"discordclient",level:4},{value:"DiscordClientBuilder",id:"discordclientbuilder",level:4},{value:"PayloadTransformer",id:"payloadtransformer",level:4},{value:"IdentifyOptions",id:"identifyoptions",level:4},{value:"GlobalRateLimiter",id:"globalratelimiter",level:4},{value:"CloseException",id:"closeexception",level:4},{value:"ReadyEvent",id:"readyevent",level:4},{value:"MessageBulkDeleteEvent",id:"messagebulkdeleteevent",level:4},{value:"New types",id:"new-types",level:3},{value:"Color",id:"color",level:4},{value:"ReactorResources",id:"reactorresources",level:4},{value:"StateView",id:"stateview",level:4},{value:"ShardCoordinator",id:"shardcoordinator",level:4},{value:"ShardInfo",id:"shardinfo",level:4},{value:"SessionInfo",id:"sessioninfo",level:4},{value:"REST-only entities",id:"rest-only-entities-1",level:4},{value:"GatewayOptions",id:"gatewayoptions",level:4},{value:"DispatchEventMapper",id:"dispatcheventmapper",level:4},{value:"Events",id:"events",level:4},{value:"Moved types",id:"moved-types",level:3},{value:"Snowflake",id:"snowflake",level:4},{value:"Permission and PermissionSet",id:"permission-and-permissionset",level:4},{value:"Image",id:"image",level:4},{value:"Possible",id:"possible",level:4},{value:"Renamed types",id:"renamed-types",level:4},{value:"JacksonResources",id:"jacksonresources",level:4},{value:"ReconnectOptions",id:"reconnectoptions",level:4},{value:"ReconnectContext",id:"reconnectcontext",level:4},{value:"Removed types",id:"removed-types",level:3},{value:"ClientConfig",id:"clientconfig",level:4},{value:"ServiceMediator",id:"servicemediator",level:4},{value:"GatewayClientFactory",id:"gatewayclientfactory",level:4},{value:"RateLimiterTransformer",id:"ratelimitertransformer",level:4},{value:"RateLimiter",id:"ratelimiter",level:4},{value:"Additions",id:"additions",level:3},{value:"Event",id:"event",level:4},{value:"GatewayStateChange",id:"gatewaystatechange",level:4},{value:"MemberChunkEvent",id:"memberchunkevent",level:4},{value:"Renames",id:"renames",level:3},{value:"Removals",id:"removals",level:3},{value:"DiscordClientBuilder",id:"discordclientbuilder-1",level:4}];function l(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Welcome to this next major release in Discord4J, a reactive wrapper library for the Discord REST API and real-time Bot Gateway with voice capabilities."}),"\n",(0,i.jsx)(n.p,{children:"After a year of feedback from users since releasing v3.0, we collected a series of changes to provide and support more use cases and bot configurations. While some of these changes could make their way into following v3.0 minor releases, some involve deeper design work that would have an impact on present releases in terms of binary and behavior changes."}),"\n",(0,i.jsx)(n.p,{children:"In addition, since Discord is an evolving platform, some of its changes also have impact in the type structure that makes it difficult to implement every change in minor releases. As such, a new major release is the opportunity to include all of these changes and prepare the library structure for future additions more rapidly."}),"\n",(0,i.jsx)(n.h2,{id:"maintenance-mode-for-v30",children:"Maintenance mode for v3.0"}),"\n",(0,i.jsx)(n.p,{children:"After v3.1.0 releases, only bugfixes will be accepted in the 3.0.x branch."}),"\n",(0,i.jsx)(n.h2,{id:"architectural-changes",children:"Architectural changes"}),"\n",(0,i.jsx)(n.h3,{id:"discordclient-is-split-from-gateway-actions",children:"DiscordClient is split from Gateway actions"}),"\n",(0,i.jsx)(n.p,{children:"In order to support more use cases, such as bots that don't use the Gateway to perform some actions, components related to REST API operations are now structurally separated from the Gateway operations."}),"\n",(0,i.jsxs)(n.p,{children:["This means a ",(0,i.jsx)(n.code,{children:"DiscordClient"})," no longer gives you access to the Store abstraction for cached entities from the Gateway and is now used to spawn Gateway connections and operating the REST API directly."]}),"\n",(0,i.jsxs)(n.p,{children:["Moving forward, the new ",(0,i.jsx)(n.code,{children:"GatewayDiscordClient"})," represents the place to fetch and work with Gateway-based entities. You now acquire this instance every time to subscribe to ",(0,i.jsx)(n.code,{children:"DiscordClient::login"})," or ",(0,i.jsx)(n.code,{children:"GatewayBootstrap::login"})," after creating it with ",(0,i.jsx)(n.code,{children:"DiscordClient::gateway"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"shard-group-creates-a-gatewaydiscordclient",children:"Shard group creates a GatewayDiscordClient"}),"\n",(0,i.jsx)(n.p,{children:"One of the main goals for this release is to lay the groundwork to build distributed bot architectures, a model where bot components are split across multiple processes."}),"\n",(0,i.jsxs)(n.p,{children:["Since many configurations exist, we decided to orient the creation of ",(0,i.jsx)(n.code,{children:"GatewayDiscordClient"}),' towards "shard groups" that encapsulate caches and events around an arbitrary number of shards. A brand new ',(0,i.jsx)(n.code,{children:"GatewayBootstrap"})," API provides creating simple, sharded, monolithic or distributed bots from a single place."]}),"\n",(0,i.jsx)(n.h3,{id:"one-eventdispatcher-publishes-for-a-shard-group",children:"One EventDispatcher publishes for a shard group"}),"\n",(0,i.jsxs)(n.p,{children:["Building a shard group creates a context that aggregates payloads from joining Gateway connections, publishing ",(0,i.jsx)(n.code,{children:"Event"})," instances to a single ",(0,i.jsx)(n.code,{children:"EventDispatcher"}),", simplifying managing a sharded bot within a process."]}),"\n",(0,i.jsxs)(n.p,{children:["For this reason, ",(0,i.jsx)(n.code,{children:"Event"})," instances are now aware of the shard they were created by."]}),"\n",(0,i.jsx)(n.h3,{id:"caches-are-shared-across-a-shard-group",children:"Caches are shared across a shard group"}),"\n",(0,i.jsx)(n.p,{children:"Since Gateway updates are processed within a shard group, Stores, our entity cache abstraction, are created once per group. This eases management for single-process sharded bots."}),"\n",(0,i.jsx)(n.h2,{id:"important-api-changes",children:"Important API changes"}),"\n",(0,i.jsxs)(n.p,{children:["For a more exhaustive list, please look at ",(0,i.jsx)(n.a,{href:"#api-changes",children:"API changes"}),"."]}),"\n",(0,i.jsxs)(n.h3,{id:"promote-snowflake-class-to-common-module",children:["Promote ",(0,i.jsx)(n.code,{children:"Snowflake"})," class to common module"]}),"\n",(0,i.jsxs)(n.p,{children:["We moved the ",(0,i.jsx)(n.code,{children:"discord4j.core.object.util.Snowflake"})," type to ",(0,i.jsx)(n.code,{children:"discord4j.common.util.Snowflake"})," in order to support all modules across the Discord4J project using it. We feel it is a great abstraction to handle IDs and the primary token of addressing particular Discord entities across the lifetime of your application."]}),"\n",(0,i.jsxs)(n.p,{children:["Other types affected by module promotion: ",(0,i.jsx)(n.code,{children:"Image"}),", ",(0,i.jsx)(n.code,{children:"Permission"}),", ",(0,i.jsx)(n.code,{children:"PermissionSet"}),". See ",(0,i.jsx)(n.a,{href:"#moved-types",children:"Moved types"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"behavior-changes",children:"Behavior changes"}),"\n",(0,i.jsx)(n.h3,{id:"login-completes-on-connect-instead-of-disconnect",children:"Login completes on connect instead of disconnect"}),"\n",(0,i.jsxs)(n.p,{children:["An important change in this major update is the change of the ",(0,i.jsx)(n.code,{children:"login()"})," method existing in ",(0,i.jsx)(n.code,{children:"DiscordClient"}),". We feel that the method makes most sense if it returns a ",(0,i.jsx)(n.code,{children:"Mono"})," that ",(0,i.jsx)(n.em,{children:"completes as login succeeds"}),", instead of logout, and to return a ",(0,i.jsx)(n.code,{children:"GatewayDiscordClient"})," handle for the underlying gateway connections."]}),"\n",(0,i.jsx)(n.h3,{id:"spec-code-is-run-on-subscription-time",children:"Spec code is run on subscription time"}),"\n",(0,i.jsxs)(n.p,{children:["Previously in v3.0, ",(0,i.jsx)(n.code,{children:"Spec"})," consumers were called on assembly time, meaning when a reactive pipeline was declared. This could lead to unexpected code execution so moving forward this was changed in alignment to the expectation of reactive programming where no significant work should happen until you subscribe."]}),"\n",(0,i.jsx)(n.h2,{id:"new-features",children:"New features"}),"\n",(0,i.jsx)(n.h3,{id:"gateway-intents-support",children:"Gateway intents support"}),"\n",(0,i.jsxs)(n.p,{children:["Add support to establish Gateway connections using the Intent system, reducing the inbound event load on your bot. See ",(0,i.jsx)(n.code,{children:"GatewayBootstrap::setEnabledIntents"})," or ",(0,i.jsx)(n.code,{children:"GatewayBootstrap::setDisabledIntents"})]}),"\n",(0,i.jsx)(n.h3,{id:"wait-until-gateway-connections-are-ready",children:"Wait until Gateway connections are ready"}),"\n",(0,i.jsxs)(n.p,{children:["Allow customizing the behavior whether a ",(0,i.jsx)(n.code,{children:"GatewayDiscordClient"}),' should be obtained immediately (similar to v3.0 behavior) or to wait until all shards in the group have connected (Discord "READY" status). Check ',(0,i.jsx)(n.code,{children:"GatewayBootstrap::setAwaitConnections"})]}),"\n",(0,i.jsx)(n.h3,{id:"custom-eventdispatcher",children:"Custom EventDispatcher"}),"\n",(0,i.jsxs)(n.p,{children:["Allow changing the ",(0,i.jsx)(n.code,{children:"EventDispatcher"})," implementation for event handling. Check the class for builders and factories."]}),"\n",(0,i.jsx)(n.h3,{id:"entity-retrieval-strategy",children:"Entity retrieval strategy"}),"\n",(0,i.jsxs)(n.p,{children:["Allow modifying the behavior of the ",(0,i.jsx)(n.code,{children:"getXById"})," methods in ",(0,i.jsx)(n.code,{children:"GatewayDiscordClient"}),". By default, like in v3.0, if a requested entity is not present in the ",(0,i.jsx)(n.code,{children:"Store"}),", a REST API request is made. Since this might not be desired, you can globally change the behavior at ",(0,i.jsx)(n.code,{children:"GatewayBootstrap::setEntityRetrievalStrategy"})," or per-call through ",(0,i.jsx)(n.code,{children:"GatewayDiscordClient::withRetrievalStrategy"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"custom-reactor-resources-used-by-rest-gateway-and-voice",children:"Custom Reactor resources used by REST, Gateway and Voice"}),"\n",(0,i.jsx)(n.p,{children:"All Reactor resources used by Discord4J can be configured, across REST, Gateway and Voice operations. You can now control almost every aspect of Discord4J threading model."}),"\n",(0,i.jsx)(n.h3,{id:"guild-member-request-behavior",children:"Guild member request behavior"}),"\n",(0,i.jsxs)(n.p,{children:["Allow providing a custom ",(0,i.jsx)(n.code,{children:"MemberRequestFilter"})," to more explicitly control member requests should be automatically issued. Check ",(0,i.jsx)(n.code,{children:"GatewayBootstrap::setMemberRequestFilter"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"on-demand-guild-member-request-lazy-loading",children:"On-demand guild member request (lazy loading)"}),"\n",(0,i.jsxs)(n.p,{children:["Add methods to directly request for guild members, such as ",(0,i.jsx)(n.code,{children:"GatewayDiscordClient::requestMembers"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"rest-only-entities",children:"REST-only entities"}),"\n",(0,i.jsxs)(n.p,{children:["Allow working with Discord4J without an active Gateway connection. Just create a ",(0,i.jsx)(n.code,{children:"DiscordClient"})," and perform calls through the ",(0,i.jsx)(n.code,{children:"getXById"})," methods to use REST API directly."]}),"\n",(0,i.jsxs)(n.p,{children:['You can also obtain a "REST entity" which wraps a particular entity with its ID (no actual data) and can be used to perform actions without unneeded API requests. These are available directly through one of the entity types supported: ',(0,i.jsx)(n.code,{children:"RestChannel"}),", ",(0,i.jsx)(n.code,{children:"RestEmoji"}),", ",(0,i.jsx)(n.code,{children:"RestGuild"}),", ",(0,i.jsx)(n.code,{children:"RestInvite"}),", ",(0,i.jsx)(n.code,{children:"RestMember"}),", ",(0,i.jsx)(n.code,{children:"RestMessage"}),", ",(0,i.jsx)(n.code,{children:"RestRole"}),", ",(0,i.jsx)(n.code,{children:"RestUser"}),", ",(0,i.jsx)(n.code,{children:"RestWebhook"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Obtaining a ",(0,i.jsx)(n.code,{children:"RestClient"})," can be done through ",(0,i.jsx)(n.code,{children:"GatewayDiscordClient::rest"})," or any ",(0,i.jsx)(n.code,{children:"DiscordClient"})," instance, capable of directly querying the API or creating such REST entities."]}),"\n",(0,i.jsx)(n.h3,{id:"normalized-internal-data-representation",children:"Normalized internal data representation"}),"\n",(0,i.jsxs)(n.p,{children:["A large effort is made into converging our many internal data structures into a more maintainable approach. We decide to use Immutables library to model the Discord domain through ",(0,i.jsx)(n.code,{children:"Data"})," classes. All are created with a ",(0,i.jsx)(n.code,{children:"Builder"})," that can simplify their usage when interacting with some API, particularly through REST-only entities."]}),"\n",(0,i.jsx)(n.h3,{id:"shardcoordinator-abstraction",children:"ShardCoordinator abstraction"}),"\n",(0,i.jsx)(n.p,{children:"A new abstraction is created to support coordination of Gateway IDENTIFY requests across multiple processes."}),"\n",(0,i.jsx)(n.h3,{id:"more-sharding-configurations-supported",children:"More sharding configurations supported"}),"\n",(0,i.jsxs)(n.p,{children:["A builder to configure how a shard group creates shards is available through ",(0,i.jsx)(n.code,{children:"ShardingStrategy"})," and can be set at ",(0,i.jsx)(n.code,{children:"GatewayBootstrap"}),'. The total shard count can be fixed or used as recommended by Discord, connect specific shards by index, and support a sharding concurrency value or "very large bot sharding system".']}),"\n",(0,i.jsx)(n.h3,{id:"improved-rate-limiting-implementations",children:"Improved rate limiting implementations"}),"\n",(0,i.jsx)(n.p,{children:"Provide a new approach to rate limit which increases throughput without locking structures. This is used across all of Discord4J: REST request queue, REST global rate limiter, Gateway identify limit and Gateway outbound limit."}),"\n",(0,i.jsx)(n.h3,{id:"custom-maximum-missed-heartbeat-ack",children:"Custom maximum missed heartbeat ACK"}),"\n",(0,i.jsx)(n.p,{children:"Bring back a setting from v2 to help deal with connection instability by avoiding detecting zombie connections too early."}),"\n",(0,i.jsx)(n.h3,{id:"custom-voice-gateway-connection-factory",children:"Custom Voice Gateway connection factory"}),"\n",(0,i.jsx)(n.p,{children:"Provide new API to customize Voice operations and tasks, in an effort to help integrate it with other tools and frameworks."}),"\n",(0,i.jsx)(n.h3,{id:"custom-gateway-invalidation-strategy",children:"Custom Gateway invalidation strategy"}),"\n",(0,i.jsx)(n.p,{children:"Allow customizing the actions that should occur on the entity cache on shard invalidation (non-resumable disconnections)"}),"\n",(0,i.jsx)(n.h3,{id:"custom-gateway-destroy-handler",children:"Custom Gateway destroy handler"}),"\n",(0,i.jsx)(n.p,{children:"Allow customizing the actions that should occur when logging out a shard group from the Gateway."}),"\n",(0,i.jsx)(n.h3,{id:"custom-gateway-to-event-mapping",children:"Custom Gateway to Event mapping"}),"\n",(0,i.jsxs)(n.p,{children:["Allow customizing how are ",(0,i.jsx)(n.code,{children:"Event"})," instances created from the Gateway updates, potentially enriching or disabling the original handling."]}),"\n",(0,i.jsx)(n.h3,{id:"custom-or-extend-gateway-configuration",children:"Custom or extend Gateway configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Provide access to the low-level ",(0,i.jsx)(n.code,{children:"GatewayClient"})," configuration, allowing extension for custom ",(0,i.jsx)(n.code,{children:"GatewayClient"})," factories. This is particularly useful to create distributed bot architectures."]}),"\n",(0,i.jsx)(n.h2,{id:"api-changes",children:"API changes"}),"\n",(0,i.jsx)(n.h3,{id:"signature-changes",children:"Signature changes"}),"\n",(0,i.jsx)(n.h4,{id:"discordclient",children:"DiscordClient"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Login returns ",(0,i.jsx)(n.code,{children:"Mono<GatewayDiscordClient>"})," and emits on Gateway connection instead of disconnection."]}),"\n",(0,i.jsx)(n.li,{children:"Can only be created from factory methods."}),"\n",(0,i.jsxs)(n.li,{children:["Methods that retrieved entities like ",(0,i.jsx)(n.code,{children:"getGuildById"})," now return REST-only entities. If you want to keep the old behavior, create a ",(0,i.jsx)(n.code,{children:"GatewayDiscordClient"})," through one of the login methods."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"discordclientbuilder",children:"DiscordClientBuilder"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Methods that configured Gateway-specific options were moved to ",(0,i.jsx)(n.code,{children:"GatewayBootstrap"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"payloadtransformer",children:"PayloadTransformer"}),"\n",(0,i.jsxs)(n.p,{children:["It is now a ",(0,i.jsx)(n.code,{children:"Flux<ByteBuf>"})," operator."]}),"\n",(0,i.jsx)(n.h4,{id:"identifyoptions",children:"IdentifyOptions"}),"\n",(0,i.jsx)(n.p,{children:"Constructor made private. This class was also made immutable with a rich set of methods to customize more options."}),"\n",(0,i.jsx)(n.h4,{id:"globalratelimiter",children:"GlobalRateLimiter"}),"\n",(0,i.jsx)(n.p,{children:"Migrate to reactive API."}),"\n",(0,i.jsx)(n.h4,{id:"closeexception",children:"CloseException"}),"\n",(0,i.jsxs)(n.p,{children:["Method ",(0,i.jsx)(n.code,{children:"getReason"})," now returns Optional. In addition, improved ",(0,i.jsx)(n.code,{children:"toString()"})," method and added ",(0,i.jsx)(n.code,{children:"getContext()"}),". A related class ",(0,i.jsx)(n.code,{children:"CloseStatus"})," also had its ",(0,i.jsx)(n.code,{children:"getReason"})," method changed in the same way."]}),"\n",(0,i.jsx)(n.h4,{id:"readyevent",children:"ReadyEvent"}),"\n",(0,i.jsx)(n.p,{children:"getTrace now returns a List<String>."}),"\n",(0,i.jsx)(n.h4,{id:"messagebulkdeleteevent",children:"MessageBulkDeleteEvent"}),"\n",(0,i.jsx)(n.p,{children:"getChannel now returns a Mono<TextChannel> instead of Mono<MessageChannel>."}),"\n",(0,i.jsx)(n.h3,{id:"new-types",children:"New types"}),"\n",(0,i.jsx)(n.h4,{id:"color",children:"Color"}),"\n",(0,i.jsx)(n.p,{children:"Our own color class to avoid a java.desktop module dependency."}),"\n",(0,i.jsx)(n.h4,{id:"reactorresources",children:"ReactorResources"}),"\n",(0,i.jsx)(n.p,{children:"A place to customize many Reactor related options."}),"\n",(0,i.jsx)(n.h4,{id:"stateview",children:"StateView"}),"\n",(0,i.jsx)(n.p,{children:"A read-only view for the entity cache (store) contents."}),"\n",(0,i.jsx)(n.h4,{id:"shardcoordinator",children:"ShardCoordinator"}),"\n",(0,i.jsx)(n.p,{children:"New class to group shard operations across JVM boundaries."}),"\n",(0,i.jsx)(n.h4,{id:"shardinfo",children:"ShardInfo"}),"\n",(0,i.jsx)(n.p,{children:"New class to group shard index and count."}),"\n",(0,i.jsx)(n.h4,{id:"sessioninfo",children:"SessionInfo"}),"\n",(0,i.jsx)(n.p,{children:"New class to group sessionId and sequence."}),"\n",(0,i.jsx)(n.h4,{id:"rest-only-entities-1",children:"REST-only entities"}),"\n",(0,i.jsx)(n.p,{children:"Introduce types related to rest module operations."}),"\n",(0,i.jsx)(n.h4,{id:"gatewayoptions",children:"GatewayOptions"}),"\n",(0,i.jsx)(n.p,{children:"Refactored all parameters used by DefaultGatewayClient and extracted them to this new class."}),"\n",(0,i.jsx)(n.h4,{id:"dispatcheventmapper",children:"DispatchEventMapper"}),"\n",(0,i.jsx)(n.p,{children:"Allow customizing the process in which Gateway payloads are processed and converted into Events."}),"\n",(0,i.jsx)(n.h4,{id:"events",children:"Events"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"New event: ReactionRemoveEmojiEvent"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"moved-types",children:"Moved types"}),"\n",(0,i.jsx)(n.h4,{id:"snowflake",children:"Snowflake"}),"\n",(0,i.jsxs)(n.p,{children:["Moved from ",(0,i.jsx)(n.code,{children:"discord4j.core.object.util"})," to ",(0,i.jsx)(n.code,{children:"discord4j.common.util"})]}),"\n",(0,i.jsx)(n.h4,{id:"permission-and-permissionset",children:"Permission and PermissionSet"}),"\n",(0,i.jsxs)(n.p,{children:["Moved from ",(0,i.jsx)(n.code,{children:"discord4j.core.object.util"})," to ",(0,i.jsx)(n.code,{children:"discord4j.rest.util"})]}),"\n",(0,i.jsx)(n.h4,{id:"image",children:"Image"}),"\n",(0,i.jsxs)(n.p,{children:["Moved from ",(0,i.jsx)(n.code,{children:"discord4j.core.object.util"})," to ",(0,i.jsx)(n.code,{children:"discord4j.rest.util"})]}),"\n",(0,i.jsx)(n.h4,{id:"possible",children:"Possible"}),"\n",(0,i.jsx)(n.p,{children:"Moved to the discord-json project which is now a dependency of discord4j-common."}),"\n",(0,i.jsx)(n.h4,{id:"renamed-types",children:"Renamed types"}),"\n",(0,i.jsx)(n.h4,{id:"jacksonresources",children:"JacksonResources"}),"\n",(0,i.jsx)(n.p,{children:"Formerly JacksonResourceProvider."}),"\n",(0,i.jsx)(n.h4,{id:"reconnectoptions",children:"ReconnectOptions"}),"\n",(0,i.jsxs)(n.p,{children:["Formerly ",(0,i.jsx)(n.code,{children:"RetryOptions"}),", it is now immutable, split from the stateful ",(0,i.jsx)(n.code,{children:"ReconnectContext"})]}),"\n",(0,i.jsx)(n.h4,{id:"reconnectcontext",children:"ReconnectContext"}),"\n",(0,i.jsxs)(n.p,{children:["Formerly ",(0,i.jsx)(n.code,{children:"RetryContext"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"removed-types",children:"Removed types"}),"\n",(0,i.jsx)(n.h4,{id:"clientconfig",children:"ClientConfig"}),"\n",(0,i.jsxs)(n.p,{children:["Shard information can now be obtained from each ",(0,i.jsx)(n.code,{children:"Event"}),"."]}),"\n",(0,i.jsx)(n.h4,{id:"servicemediator",children:"ServiceMediator"}),"\n",(0,i.jsx)(n.p,{children:"State and resources held by this class were relocated to appropriate components:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"GatewayClient are now located in GatewayClientGroup which is accessible from a GatewayDiscordClient"}),"\n",(0,i.jsx)(n.li,{children:"RestClient is now the parent class of DiscordClient so methods can be called directly from it"}),"\n",(0,i.jsx)(n.li,{children:"StateHolder is now available at GatewayResources, accessible from GatewayDiscordClient"}),"\n",(0,i.jsx)(n.li,{children:"EventDispatcher is accessible from GatewayDiscordClient"}),"\n",(0,i.jsx)(n.li,{children:"VoiceClient was replaced by a VoiceConnectionRegistry, a far more powerful alternative, accessible from GatewayDiscordClient"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"gatewayclientfactory",children:"GatewayClientFactory"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"GatewayClientFactory"})," was removed as it can be now be used in a functional way within ",(0,i.jsx)(n.code,{children:"GatewayBootstrap::login(Function)"}),"."]}),"\n",(0,i.jsx)(n.h4,{id:"ratelimitertransformer",children:"RateLimiterTransformer"}),"\n",(0,i.jsx)(n.h4,{id:"ratelimiter",children:"RateLimiter"}),"\n",(0,i.jsx)(n.p,{children:"Removed interface, along with SimpleBucket, as part of the rate limiting implementations rework."}),"\n",(0,i.jsx)(n.h3,{id:"additions",children:"Additions"}),"\n",(0,i.jsx)(n.h4,{id:"event",children:"Event"}),"\n",(0,i.jsx)(n.p,{children:"Add getShardInfo."}),"\n",(0,i.jsx)(n.h4,{id:"gatewaystatechange",children:"GatewayStateChange"}),"\n",(0,i.jsxs)(n.p,{children:["Add resume states to ",(0,i.jsx)(n.code,{children:"GatewayStateChange"}),"."]}),"\n",(0,i.jsx)(n.h4,{id:"memberchunkevent",children:"MemberChunkEvent"}),"\n",(0,i.jsx)(n.p,{children:"Add new methods related to chunk index, count, etc."}),"\n",(0,i.jsx)(n.h3,{id:"renames",children:"Renames"}),"\n",(0,i.jsx)(n.p,{children:"None"}),"\n",(0,i.jsx)(n.h3,{id:"removals",children:"Removals"}),"\n",(0,i.jsx)(n.h4,{id:"discordclientbuilder-1",children:"DiscordClientBuilder"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["No longer possible to set debug mode. Use the reactor-debug-agent or ",(0,i.jsx)(n.code,{children:"Hooks.onOperatorDebug()"})," at the start of your application if you wish to retain this capability."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var i=t(6540);const s={},a=i.createContext(s);function o(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);