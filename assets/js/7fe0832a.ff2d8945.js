"use strict";(self.webpackChunkdiscord4j_documentation=self.webpackChunkdiscord4j_documentation||[]).push([[723],{1262:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var o=t(4848),s=t(8453);const r={id:"frequently-asked-questions",title:"Frequently Asked Questions",sidebar_label:"Frequently Asked Questions",slug:"/frequently-asked-questions"},a=void 0,i={id:"Reference/frequently-asked-questions",title:"Frequently Asked Questions",description:"A non-comprehensive collection of common pitfalls/questions we see a lot when using Discord4J.",source:"@site/docs/05-Reference/frequently-asked-questions.mdx",sourceDirName:"05-Reference",slug:"/frequently-asked-questions",permalink:"/frequently-asked-questions",draft:!1,unlisted:!1,editUrl:"https://github.com/Discord4J/documentation/edit/master/docs/05-Reference/frequently-asked-questions.mdx",tags:[],version:"current",lastUpdatedAt:1632891245e3,frontMatter:{id:"frequently-asked-questions",title:"Frequently Asked Questions",sidebar_label:"Frequently Asked Questions",slug:"/frequently-asked-questions"},sidebar:"mySidebar",previous:{title:"Examples",permalink:"/examples"},next:{title:"Glossary",permalink:"/glossary"}},l={},c=[{value:"Snowflakes",id:"snowflakes",level:2},{value:"Getting entities",id:"getting-entities",level:2},{value:"In response to an event",id:"in-response-to-an-event",level:3},{value:"Without an event",id:"without-an-event",level:3},{value:"Channel types",id:"channel-types",level:2},{value:"Reactor",id:"reactor",level:2},{value:"Do I use map or flatMap?",id:"do-i-use-map-or-flatmap",level:3},{value:"Building a plugin",id:"building-a-plugin",level:2},{value:"I&#39;m getting java.lang.NoSuchMethodError: io.netty... or java.lang.NoClassDefFoundError: com.fasterxml...",id:"im-getting-javalangnosuchmethoderror-ionetty-or-javalangnoclassdeffounderror-comfasterxml",level:3},{value:"Maven",id:"maven",level:4},{value:"Gradle",id:"gradle",level:4}];function d(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"A non-comprehensive collection of common pitfalls/questions we see a lot when using Discord4J."}),"\n",(0,o.jsx)(n.h2,{id:"snowflakes",children:"Snowflakes"}),"\n",(0,o.jsx)(n.p,{children:'"What is a snowflake? How do I create one from an ID I got from Discord?"'}),"\n",(0,o.jsxs)(n.p,{children:["Snowflakes are the format Discord ",(0,o.jsx)(n.a,{href:"https://discord.com/developers/docs/reference#snowflakes",children:"uses"})," for their IDs. Discord4J encodes this in the type located at ",(0,o.jsx)(n.code,{children:"discord4j.common.util.Snowflake"})," in v3.1 or ",(0,o.jsx)(n.code,{children:"discord4j.core.object.util.Snowflake"})," in v3.0 which you will see all over the library. This provides a way to convert back and forth between different representations of snowflakes and some utilities around them."]}),"\n",(0,o.jsxs)(n.p,{children:["To obtain a ",(0,o.jsx)(n.code,{children:"Snowflake"})," from an ID you got from the Discord client, you can use one of its several static factory (",(0,o.jsx)(n.code,{children:"of()"}),") methods. The most convenient for this case is either ",(0,o.jsx)(n.code,{children:"of(long)"})," or ",(0,o.jsx)(n.code,{children:"of(String)"}),". There is no difference between these methods. For example, if my ID is ",(0,o.jsx)(n.code,{children:"84766711735136256"})," I can do: ",(0,o.jsx)(n.code,{children:'Snowflake.of("84766711735136256")'})," or ",(0,o.jsx)(n.code,{children:"Snowflake.of(84766711735136256L)"}),". ",(0,o.jsxs)(n.em,{children:["Take note of the ",(0,o.jsx)(n.code,{children:"L"})," at the end of the latter example."]})," This is a ",(0,o.jsx)(n.a,{href:"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html",children:"long literal"})," and could be required to tell Java that the number is a ",(0,o.jsx)(n.code,{children:"long"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"getting-entities",children:"Getting entities"}),"\n",(0,o.jsx)(n.p,{children:'"I want to get a channel, role, guild, etc..."'}),"\n",(0,o.jsx)(n.h3,{id:"in-response-to-an-event",children:"In response to an event"}),"\n",(0,o.jsx)(n.p,{children:'"...when handling an event."'}),"\n",(0,o.jsxs)(n.p,{children:["If you have an ",(0,o.jsx)(n.code,{children:"Event"})," and want to get an entity related to that event, more than likely there is a path to get to that info from the event. For example, ",(0,o.jsx)(n.code,{children:"MessageCreateEvent"})," directly has ",(0,o.jsx)(n.code,{children:"getGuild()"})," and the channel can be obtained through the related message like ",(0,o.jsx)(n.code,{children:"getMessage().getChannel()"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"without-an-event",children:"Without an event"}),"\n",(0,o.jsx)(n.p,{children:'"...outside of an event handler."'}),"\n",(0,o.jsxs)(n.p,{children:["If you don't have an ",(0,o.jsx)(n.code,{children:"Event"})," or there isn't a way to get the entity you want from the event, you can use the fact that all entities have a unique ID associated to them called a ",(0,o.jsx)(n.code,{children:"Snowflake"}),". You can ",(0,o.jsx)(n.a,{href:"https://support.discord.com/hc/en-us/articles/206346498-Where-can-I-find-my-User-Server-Message-ID-",children:"obtain"})," this ID in the Discord client and pass it to one of the many ",(0,o.jsx)(n.code,{children:"getXById(Snowflake)"})," methods of ",(0,o.jsx)(n.code,{children:"DiscordClient"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"channel-types",children:"Channel types"}),"\n",(0,o.jsxs)(n.p,{children:["\"I can't send a message to a ",(0,o.jsx)(n.code,{children:"Channel"}),', what gives?"']}),"\n",(0,o.jsxs)(n.p,{children:["Discord4J uses a hierarchy of types to separate the behavior of all of the different types of channels in Discord. Consider the fact that a method for sending messages doesn't make much sense for a ",(0,o.jsx)(n.code,{children:"VoiceChannel"}),". Here is an overview of this hierarchy (with some of the internal details removed): ",(0,o.jsx)("img",{src:"/img/channel_hierarchy.png"})]}),"\n",(0,o.jsxs)(n.p,{children:["In general, Discord4J uses the least specific type of channel it can. For example, ",(0,o.jsx)(n.code,{children:"Message#getChannel()"})," gets you a ",(0,o.jsx)(n.code,{children:"MessageChannel"})," which could be any of ",(0,o.jsx)(n.code,{children:"TextChannel"}),", ",(0,o.jsx)(n.code,{children:"NewsChannel"}),", or ",(0,o.jsx)(n.code,{children:"PrivateChannel"}),". So, what should you do if you ",(0,o.jsx)(n.em,{children:"know"})," you have one of the more specific types? Cast! This can be done in Reactor with either the ",(0,o.jsx)(n.a,{href:"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#ofType-java.lang.Class-",children:(0,o.jsx)(n.code,{children:"ofType(Class)"})})," or ",(0,o.jsx)(n.a,{href:"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#cast-java.lang.Class-",children:(0,o.jsx)(n.code,{children:"cast(Class)"})})," operator. So, to get a channel which you ",(0,o.jsx)(n.em,{children:"know"})," is a ",(0,o.jsx)(n.code,{children:"TextChannel"})," you could do ",(0,o.jsx)(n.code,{children:"client.getChannelById(id).cast(TextChannel.class)"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"reactor",children:"Reactor"}),"\n",(0,o.jsx)(n.p,{children:'"What the heck is a Mono?"'}),"\n",(0,o.jsxs)(n.p,{children:["Discord4J uses a library called Reactor to facilitate reactive programming in Java. Both the concepts and the library itself can be intimidating at first. As this is a very broad topic, we have split off this documentation into other pages and defer to Reactor docs. Please see our ",(0,o.jsx)(n.a,{href:"/reactive-reactor-tutorial",children:"Reactive (Reactor) Tutorial"})," and the awesome ",(0,o.jsx)(n.a,{href:"https://projectreactor.io/docs/core/release/reference/",children:"Reactor Reference Guide"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"do-i-use-map-or-flatmap",children:"Do I use map or flatMap?"}),"\n",(0,o.jsx)("img",{src:"/img/map_or_flatmap.svg"}),"\n",(0,o.jsx)(n.h2,{id:"building-a-plugin",children:"Building a plugin"}),"\n",(0,o.jsx)(n.h3,{id:"im-getting-javalangnosuchmethoderror-ionetty-or-javalangnoclassdeffounderror-comfasterxml",children:"I'm getting java.lang.NoSuchMethodError: io.netty... or java.lang.NoClassDefFoundError: com.fasterxml..."}),"\n",(0,o.jsxs)(n.p,{children:["If you're trying to build a Minecraft plugin with Discord4J, you'll have a conflict with versions both depend on. Discord4J uses newer Netty and Jackson methods that don't exist in Minecraft's version, therefore you must use a technique called ",(0,o.jsx)(n.strong,{children:"Shading"})," to make your plugin ship the ones used by Discord4J."]}),"\n",(0,o.jsx)(n.p,{children:"This can be achieved through Maven or Gradle"}),"\n",(0,o.jsx)(n.h4,{id:"maven",children:"Maven"}),"\n",(0,o.jsxs)(n.p,{children:["Use ",(0,o.jsx)(n.a,{href:"https://rmannibucau.metawerx.net/post/mavens-shade-plugin-source-relocation",children:"maven-shade-plugin"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:"\x3c!-- pom.xml --\x3e\r\n<plugin>\r\n  <groupId>org.apache.maven.plugins</groupId>\r\n  <artifactId>maven-shade-plugin</artifactId>\r\n  <version>3.2.3</version>\r\n  <executions>\r\n    <execution>\r\n      <phase>package</phase>\r\n      <goals>\r\n        <goal>shade</goal>\r\n      </goals>\r\n      <configuration>\r\n        <relocations>\r\n          <relocation>\r\n            <pattern>io.netty</pattern>\r\n            <shadedPattern>com.discord4j.shaded.io.netty</shadedPattern>\r\n          </relocation>\r\n          <relocation>\r\n            <pattern>com.fasterxml</pattern>\r\n            <shadedPattern>com.discord4j.shaded.com.fasterxml</shadedPattern>\r\n          </relocation>\r\n        </relocations>\r\n      </configuration>\r\n    </execution>\r\n  </executions>\r\n</plugin>\n"})}),"\n",(0,o.jsx)(n.h4,{id:"gradle",children:"Gradle"}),"\n",(0,o.jsxs)(n.p,{children:["Use ",(0,o.jsx)(n.a,{href:"https://imperceptiblethoughts.com/shadow/getting-started/",children:"gradle-shadow-plugin"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-groovy",children:"// build.gradle\r\nplugins {\r\n  id 'com.github.johnrengelman.shadow' version '5.2.0'\r\n  id 'java'\r\n}\r\n\r\n// ...\r\n\r\n// Relocating a Package\r\nshadowJar {\r\n  relocate 'io.netty', 'com.discord4j.shaded.io.netty'\r\n  relocate 'com.fasterxml', 'com.discord4j.shaded.com.fasterxml'\r\n}\n"})}),"\n",(0,o.jsxs)(n.p,{children:["If you have any issues regarding this process, feel free to get in touch with us in our ",(0,o.jsx)(n.a,{href:"https://discord.gg/d4j",children:(0,o.jsx)(n.img,{src:"https://img.shields.io/discord/208023865127862272.svg?color=7289da&label=Discord4J&logo=discord&style=flat-square",alt:"Support Server Invite"})})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>i});var o=t(6540);const s={},r=o.createContext(s);function a(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);