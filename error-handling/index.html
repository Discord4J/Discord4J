<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-How-to Guides/error-handling" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">Error Handling | Discord4J</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://discord4j.com/error-handling"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Error Handling | Discord4J"><meta data-rh="true" name="description" content="For a more detailed source of information, please refer to this section of the Reactor reference guide."><meta data-rh="true" property="og:description" content="For a more detailed source of information, please refer to this section of the Reactor reference guide."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://discord4j.com/error-handling"><link data-rh="true" rel="alternate" href="https://discord4j.com/error-handling" hreflang="en"><link data-rh="true" rel="alternate" href="https://discord4j.com/error-handling" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://C7ZMMWOOHU-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-100029628-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-100029628-1",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Discord4J" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.f8f5dca9.css">
<script src="/assets/js/runtime~main.a61b7613.js" defer="defer"></script>
<script src="/assets/js/main.dd0e6ff0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Discord4J Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Discord4J Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Discord4J</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Welcome to Discord4J Docs!</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quickstart">Quickstart</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/discord-application-tutorial">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/interactions/application-commands">How-to Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/interactions/application-commands">Interactions</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/embeds">Embeds</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/error-handling">Error Handling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/logging">Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sharding">Sharding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/threading">Threading</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/using-snapshots">Using Snapshots</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/using-the-bom">Using the BOM</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/examples">Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/lambda-tutorial">Conceptual Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/migrating-from-v2-x-to-v3-1">Migration Guides</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">How-to Guides</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Error Handling</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Error Handling</h1></header><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>For a more detailed source of information, please refer to <a href="https://projectreactor.io/docs/core/release/reference/#error.handling" target="_blank" rel="noopener noreferrer">this section</a> of the Reactor reference guide.</p></div></div>
<p>According to reactive streams specification, errors are terminal signals. This typically means any running sequence will be <strong>terminated</strong> and the error propagated to all operators down the chain.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="handling-errors">Handling Errors<a href="#handling-errors" class="hash-link" aria-label="Direct link to Handling Errors" title="Direct link to Handling Errors">​</a></h2>
<p>The following are some valid strategies for dealing with errors:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="accept-the-error">Accept the error<a href="#accept-the-error" class="hash-link" aria-label="Direct link to Accept the error" title="Direct link to Accept the error">​</a></h3>
<p>Error will propagate downstream until the end of the chain and then run the <code>onError</code> callback in your subscriber.</p>
<p>You can optionally log and react on the side using <code>doOnError</code> operator.</p>
<p>As good practice, we encourage you to <strong>implement the <code>onError</code> callback</strong> when subscribing to be properly notified. If you don&#x27;t override the <code>onError</code> callback, you will receive a Reactor <code>ErrorCallbackNotImplemented</code> exception wrapping your original exception.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token plain">client</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getEventDispatcher</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">on</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">MessageCreateEvent</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token keyword" style="color:#cc7832">class</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">map</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">MessageCreateEvent</span><span class="token operator" style="color:#a9b7c6">::</span><span class="token function" style="color:#ffc66d">getMessage</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">filter</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">message </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> message</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getAuthor</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">map</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">user </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#a9b7c6">!</span><span class="token plain">user</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">isBot</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">orElse</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token boolean" style="color:#cc7832">false</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">filter</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">message </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> message</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getContent</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">equalsIgnoreCase</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;!ping&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">flatMap</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">Message</span><span class="token operator" style="color:#a9b7c6">::</span><span class="token function" style="color:#ffc66d">getChannel</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">flatMap</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">channel </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> channel</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">createMessage</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;Pong!&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">doOnError</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">error </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#a9b7c6">{</span><span class="token plain"> </span><span class="token comment" style="color:#808080">/* You can be notified here as well! */</span><span class="token plain"> </span><span class="token punctuation" style="color:#a9b7c6">}</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">subscribe</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token keyword" style="color:#cc7832">null</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> error </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#a9b7c6">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token comment" style="color:#808080">// the error signal will stop here and terminate the sequence</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">println</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">}</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>⚠️ Taking this approach under <code>EventDispatcher</code> sequences will terminate your subscription, missing all further events for that subscriber. In general, this is a poor solution if you wish to perform extra behavior like starting another chain.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="catch-and-return-a-static-default-value-onerrorreturn"><a href="https://projectreactor.io/docs/core/release/reference/#_static_fallback_value" target="_blank" rel="noopener noreferrer">Catch and return a static default value</a>: <code>onErrorReturn</code><a href="#catch-and-return-a-static-default-value-onerrorreturn" class="hash-link" aria-label="Direct link to catch-and-return-a-static-default-value-onerrorreturn" title="Direct link to catch-and-return-a-static-default-value-onerrorreturn">​</a></h3>
<p>✔️ This approach is good for individual API requests when you want to return a value in case of an error.</p>
<p>⚠️ Taking this approach with <code>EventDispatcher</code> will terminate the sequence, and no further events will be received by that subscriber, unless you apply this operator to an inner sequence, without affecting the outer one containing all events, like this example:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token plain">client</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getEventDispatcher</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">on</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">MessageCreateEvent</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token keyword" style="color:#cc7832">class</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">map</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">MessageCreateEvent</span><span class="token operator" style="color:#a9b7c6">::</span><span class="token function" style="color:#ffc66d">getMessage</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">filter</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">message </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> message</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getAuthor</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">map</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">user </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#a9b7c6">!</span><span class="token plain">user</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">isBot</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">orElse</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token boolean" style="color:#cc7832">false</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">filter</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">message </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> message</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getContent</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">startsWith</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;!user &quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">flatMap</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">message </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> </span><span class="token class-name">Mono</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">just</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">message</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getContent</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">map</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">content </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> content</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">split</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot; &quot;</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token number" style="color:#6897bb">2</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">flatMap</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">tokens </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> message</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getClient</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getUserById</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">Snowflake</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">of</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">tokens</span><span class="token punctuation" style="color:#a9b7c6">[</span><span class="token number" style="color:#6897bb">1</span><span class="token punctuation" style="color:#a9b7c6">]</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">map</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">user </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> user</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getUsername</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"> </span><span class="token operator" style="color:#a9b7c6">+</span><span class="token plain"> </span><span class="token string" style="color:#6a8759">&quot;#&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#a9b7c6">+</span><span class="token plain"> user</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getDiscriminator</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">            </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">onErrorReturn</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;Could not find that user&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"> </span><span class="token comment" style="color:#808080">// Replaces errors with this msg</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">flatMap</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">name </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> message</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getChannel</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">            </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">flatMap</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">channel </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> channel</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">createMessage</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">subscribe</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token keyword" style="color:#cc7832">null</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token class-name">System</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token plain">out</span><span class="token operator" style="color:#a9b7c6">::</span><span class="token function" style="color:#ffc66d">println</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>onErrorReturn has overloads to include a condition so you could for example use the following to only recover from <code>404</code> status errors (Not found):</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">onErrorReturn</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">ClientException</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">isStatusCode</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token number" style="color:#6897bb">404</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token string" style="color:#6a8759">&quot;Could not find that user&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="catch-and-execute-an-alternative-path-with-a-fallback-method-onerrorresume"><a href="https://projectreactor.io/docs/core/release/reference/#_fallback_method" target="_blank" rel="noopener noreferrer">Catch and execute an alternative path with a fallback method</a>: <code>onErrorResume</code><a href="#catch-and-execute-an-alternative-path-with-a-fallback-method-onerrorresume" class="hash-link" aria-label="Direct link to catch-and-execute-an-alternative-path-with-a-fallback-method-onerrorresume" title="Direct link to catch-and-execute-an-alternative-path-with-a-fallback-method-onerrorresume">​</a></h3>
<p>✔️ This approach is good for individual API requests when you want to provide alternative behavior.</p>
<p>✔️ This approach is great when working inside a <code>flatMap</code> with <code>EventDispatcher</code>, as you will replace the sequence with, for example, <code>Mono.empty()</code> effectively suppresing the error while maintaining the original sequence.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token class-name">Flux</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">just</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;😀&quot;</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token string" style="color:#6a8759">&quot;😬&quot;</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token string" style="color:#6a8759">&quot;😂&quot;</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token string" style="color:#6a8759">&quot;😄&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">flatMap</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">emoji </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> message</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">addReaction</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">ReactionEmoji</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">unicode</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">emoji</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">onErrorResume</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">e </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> </span><span class="token class-name">Mono</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">empty</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"> </span><span class="token comment" style="color:#808080">// error is discarded</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">subscribe</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"> </span><span class="token comment" style="color:#808080">// so it won&#x27;t get here</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you were to place <code>onErrorResume</code> outside a <code>flatMap</code>, you&#x27;ll replace the sequence, potentially missing some elements being processed:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token class-name">Flux</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">just</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;😀&quot;</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token string" style="color:#6a8759">&quot;😬&quot;</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token string" style="color:#6a8759">&quot;😂&quot;</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token string" style="color:#6a8759">&quot;😄&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token comment" style="color:#808080">// if this fails on the 3rd emoji</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">flatMap</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">emoji </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> message</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">addReaction</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">ReactionEmoji</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">unicode</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">emoji</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token comment" style="color:#808080">// you&#x27;ll replace the sequence with an empty one, and miss the last one</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">onErrorResume</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">e </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> </span><span class="token class-name">Mono</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">empty</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token comment" style="color:#808080">// but the error still won&#x27;t reach here!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">subscribe</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="catch-and-rethrow-onerrormap"><a href="https://projectreactor.io/docs/core/release/reference/#_catch_and_rethrow" target="_blank" rel="noopener noreferrer">Catch and Rethrow</a>: <code>onErrorMap</code><a href="#catch-and-rethrow-onerrormap" class="hash-link" aria-label="Direct link to catch-and-rethrow-onerrormap" title="Direct link to catch-and-rethrow-onerrormap">​</a></h3>
<p>✔️ This approach is good for individual API requests when you want to translate the error, typically <code>ClientException</code>, to a type you control for additional behavior downstream.</p>
<p>✔️ This approach is good when working with <code>EventDispatcher</code> for the same reason as above. Be aware that the sequence is still on error and can be handled by a different strategy on following operators.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="retrying-retry-retrywhen"><a href="https://projectreactor.io/docs/core/release/reference/#_retrying" target="_blank" rel="noopener noreferrer">Retrying</a>: <code>retry</code>, <code>retryWhen</code><a href="#retrying-retry-retrywhen" class="hash-link" aria-label="Direct link to retrying-retry-retrywhen" title="Direct link to retrying-retry-retrywhen">​</a></h3>
<p>Error will terminate the original sequence, but <code>retry()</code> (and <a href="https://projectreactor.io/docs/core/release/reference/#_retrying" target="_blank" rel="noopener noreferrer">variants</a>) will <strong>re-subscribe</strong> to the upstream Flux. Be aware that this ultimately means that a new sequence is created.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token plain">client</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getEventDispatcher</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">on</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">MessageCreateEvent</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token keyword" style="color:#cc7832">class</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">map</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">MessageCreateEvent</span><span class="token operator" style="color:#a9b7c6">::</span><span class="token function" style="color:#ffc66d">getMessage</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">filter</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">message </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> message</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getAuthor</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">map</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">user </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#a9b7c6">!</span><span class="token plain">user</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">isBot</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">orElse</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token boolean" style="color:#cc7832">false</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">filter</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">message </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> message</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getContent</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">equalsIgnoreCase</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;!ping&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">flatMap</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">Message</span><span class="token operator" style="color:#a9b7c6">::</span><span class="token function" style="color:#ffc66d">getChannel</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">flatMap</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">channel </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> channel</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">createMessage</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;Pong!&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">retry</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">subscribe</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>⚠️ This approach is generally appropriate for API requests, but there are certain errors you should not retry. By default, Discord4J retries some errors for you, using an exponential backoff with jitter strategy.</p>
<p>✔️ This approach is compatible with <code>EventDispatcher</code> sources when using the <a href="https://projectreactor.io/docs/core/release/api/reactor/core/publisher/EmitterProcessor.html" target="_blank" rel="noopener noreferrer">default event processor</a>, due to it only relaying events since the time of subscription. As retrying creates a new subscription, the erroring event will be discarded and the sequence will continue from the next event.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="catch-and-continue-mode">Catch and continue mode<a href="#catch-and-continue-mode" class="hash-link" aria-label="Direct link to Catch and continue mode" title="Direct link to Catch and continue mode">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="onerrorcontinue"><code>onErrorContinue</code><a href="#onerrorcontinue" class="hash-link" aria-label="Direct link to onerrorcontinue" title="Direct link to onerrorcontinue">​</a></h4>
<p>⚠️ This only works <strong>on supporting operators</strong>: <code>flatMap</code>, <code>map</code> and <code>filter</code>, among others according to their javadocs. This operator goes beyond the Reactive Streams spec and uses the Reactor Context to work, therefore it is prone to issues when combining it with unsupported operators. Only use this operator if you understand the consequences, or you&#x27;re familiar with how Reactor Context works.</p>
<p>Applying <code>onErrorContinue</code> on a <code>Flux</code> will change the default behavior of treating errors as terminal events to discarding erroneous elements and keeping the same sequence active.</p>
<p>We do not recommend the usage of this operator for error handling purposes. Instead, try this &quot;resuming to empty&quot; pattern, preventing the error from continuing downstream:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">flatMap</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">source </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> </span><span class="token function" style="color:#ffc66d">reactiveOperationThatMightError</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">doOnError</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">error </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> log</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">info</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;Error encountered while processing {}&quot;</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> source</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> error</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">onErrorResume</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">error </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> </span><span class="token class-name">Mono</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">empty</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="onerrorstop"><code>onErrorStop</code><a href="#onerrorstop" class="hash-link" aria-label="Direct link to onerrorstop" title="Direct link to onerrorstop">​</a></h4>
<p>Using <code>onErrorStop</code> will revert the behavior to treating errors as terminal events. This can be used to accurately scope continue strategy and avoid surprises, specially when combining it with <code>onErrorResume</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="error-sources">Error Sources<a href="#error-sources" class="hash-link" aria-label="Direct link to Error Sources" title="Direct link to Error Sources">​</a></h2>
<p>Typical Reactor operators will throw errors if you:</p>
<ul>
<li>Throw any <code>RuntimeException</code> inside a lambda within an operator (see <a href="https://projectreactor.io/docs/core/release/reference/#_handling_exceptions_in_operators_or_functions" target="_blank" rel="noopener noreferrer">4.6.2</a> for an in-depth explanation)</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token class-name">Flux</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">just</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token number" style="color:#6897bb">1</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token number" style="color:#6897bb">2</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token number" style="color:#6897bb">0</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">map</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">i </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> </span><span class="token string" style="color:#6a8759">&quot;100 / &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#a9b7c6">+</span><span class="token plain"> i </span><span class="token operator" style="color:#a9b7c6">+</span><span class="token plain"> </span><span class="token string" style="color:#6a8759">&quot; = &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#a9b7c6">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token number" style="color:#6897bb">100</span><span class="token plain"> </span><span class="token operator" style="color:#a9b7c6">/</span><span class="token plain"> i</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"> </span><span class="token comment" style="color:#808080">// this triggers an error with 0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">subscribe</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Transform a signal into an error one</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token class-name">Flux</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">just</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;Mega&quot;</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token string" style="color:#6a8759">&quot;Micro&quot;</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token string" style="color:#6a8759">&quot;Nano&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">flatMap</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">s </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#a9b7c6">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token keyword" style="color:#cc7832">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">startsWith</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;M&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#a9b7c6">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">            </span><span class="token keyword" style="color:#cc7832">return</span><span class="token plain"> </span><span class="token class-name">Mono</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">just</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">}</span><span class="token plain"> </span><span class="token keyword" style="color:#cc7832">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#a9b7c6">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">            </span><span class="token keyword" style="color:#cc7832">return</span><span class="token plain"> </span><span class="token class-name">Mono</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">error</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token keyword" style="color:#cc7832">new</span><span class="token plain"> </span><span class="token class-name">RuntimeException</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token punctuation" style="color:#a9b7c6">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">}</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">subscribe</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Receive an HTTP error code (400s or 500s)</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token plain">client</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getEventDispatcher</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">on</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">MessageCreateEvent</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token keyword" style="color:#cc7832">class</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">map</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">MessageCreateEvent</span><span class="token operator" style="color:#a9b7c6">::</span><span class="token function" style="color:#ffc66d">getMessage</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">filter</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">message </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> message</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getAuthor</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">map</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">user </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#a9b7c6">!</span><span class="token plain">user</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">isBot</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">orElse</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token boolean" style="color:#cc7832">false</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">filter</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">message </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> message</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">getContent</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">equalsIgnoreCase</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;!ping&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">flatMap</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">Message</span><span class="token operator" style="color:#a9b7c6">::</span><span class="token function" style="color:#ffc66d">getChannel</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">flatMap</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">channel </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> channel</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">createMessage</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token string" style="color:#6a8759">&quot;Pong!&quot;</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"> </span><span class="token comment" style="color:#808080">// can fail with 403, 500, ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">subscribe</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Return <code>null</code> (except some documented cases)</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token class-name">Flux</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">just</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token number" style="color:#6897bb">1</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token number" style="color:#6897bb">2</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token number" style="color:#6897bb">3</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">map</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">n </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#cc7832">null</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"> </span><span class="token comment" style="color:#808080">// illegal operation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">subscribe</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Overflow due to not generating enough demand</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token comment" style="color:#808080">// Generate a tick every 10 ms</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain"></span><span class="token class-name">Flux</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">interval</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">Duration</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">ofMillis</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token number" style="color:#6897bb">10</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token comment" style="color:#808080">//.onBackpressureDrop() // uncommenting this avoids the error: drop tick if consumer is choked</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">flatMap</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">tick </span><span class="token operator" style="color:#a9b7c6">-&gt;</span><span class="token plain"> </span><span class="token class-name">Mono</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">never</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"> </span><span class="token comment" style="color:#808080">// would &quot;never&quot; consume the upstream ticks, overflows</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">subscribe</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="handling-errors-across-multiple-requests-using-discord4j">Handling errors across multiple requests using Discord4J<a href="#handling-errors-across-multiple-requests-using-discord4j" class="hash-link" aria-label="Direct link to Handling errors across multiple requests using Discord4J" title="Direct link to Handling errors across multiple requests using Discord4J">​</a></h2>
<p>Until now, we have seen examples that deal with error handling on particular sequences, and while you should continue to use these patterns for most use cases, you might find yourself applying the same operator to a lot of requests. For those cases, Discord4J provides a way to install an error handler across many or all requests made by a <code>DiscordClient</code>.</p>
<p>When you build a Discord4J client through <code>DiscordClientBuilder</code> you&#x27;ll notice that there are many setters for a variety of customization. You can handle errors in multiple requests by providing a custom <code>ResponseFunction</code> through <code>onClientResponse</code> method.</p>
<p>You could, for example, build your clients this way:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#a9b7c6;--prism-background-color:#2b2b2b"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#a9b7c6;background-color:#2b2b2b"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#a9b7c6"><span class="token keyword" style="color:#cc7832">import</span><span class="token plain"> </span><span class="token import namespace">discord4j</span><span class="token import namespace punctuation" style="color:#a9b7c6">.</span><span class="token import namespace">rest</span><span class="token import namespace punctuation" style="color:#a9b7c6">.</span><span class="token import namespace">http</span><span class="token import namespace punctuation" style="color:#a9b7c6">.</span><span class="token import namespace">client</span><span class="token import namespace punctuation" style="color:#a9b7c6">.</span><span class="token import class-name">ClientException</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain"></span><span class="token keyword" style="color:#cc7832">import</span><span class="token plain"> </span><span class="token import namespace">discord4j</span><span class="token import namespace punctuation" style="color:#a9b7c6">.</span><span class="token import namespace">rest</span><span class="token import namespace punctuation" style="color:#a9b7c6">.</span><span class="token import namespace">request</span><span class="token import namespace punctuation" style="color:#a9b7c6">.</span><span class="token import class-name">RouteMatcher</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain"></span><span class="token keyword" style="color:#cc7832">import</span><span class="token plain"> </span><span class="token import namespace">discord4j</span><span class="token import namespace punctuation" style="color:#a9b7c6">.</span><span class="token import namespace">rest</span><span class="token import namespace punctuation" style="color:#a9b7c6">.</span><span class="token import namespace">response</span><span class="token import namespace punctuation" style="color:#a9b7c6">.</span><span class="token import class-name">ResponseFunction</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain"></span><span class="token keyword" style="color:#cc7832">import</span><span class="token plain"> </span><span class="token import namespace">discord4j</span><span class="token import namespace punctuation" style="color:#a9b7c6">.</span><span class="token import namespace">rest</span><span class="token import namespace punctuation" style="color:#a9b7c6">.</span><span class="token import namespace">route</span><span class="token import namespace punctuation" style="color:#a9b7c6">.</span><span class="token import class-name">Routes</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain"></span><span class="token keyword" style="color:#cc7832">import</span><span class="token plain"> </span><span class="token import namespace">reactor</span><span class="token import namespace punctuation" style="color:#a9b7c6">.</span><span class="token import namespace">retry</span><span class="token import namespace punctuation" style="color:#a9b7c6">.</span><span class="token import class-name">Retry</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain"></span><span class="token keyword" style="color:#cc7832">import</span><span class="token plain"> </span><span class="token import namespace">java</span><span class="token import namespace punctuation" style="color:#a9b7c6">.</span><span class="token import namespace">time</span><span class="token import namespace punctuation" style="color:#a9b7c6">.</span><span class="token import class-name">Duration</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain"></span><span class="token keyword" style="color:#cc7832">public</span><span class="token plain"> </span><span class="token keyword" style="color:#cc7832">class</span><span class="token plain"> </span><span class="token class-name">ExampleClientResponse</span><span class="token plain"> </span><span class="token punctuation" style="color:#a9b7c6">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token keyword" style="color:#cc7832">public</span><span class="token plain"> </span><span class="token keyword" style="color:#cc7832">static</span><span class="token plain"> </span><span class="token keyword" style="color:#cc7832">void</span><span class="token plain"> </span><span class="token function" style="color:#ffc66d">main</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#a9b7c6">[</span><span class="token punctuation" style="color:#a9b7c6">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#a9b7c6">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">        </span><span class="token class-name">DiscordClient</span><span class="token plain"> client </span><span class="token operator" style="color:#a9b7c6">=</span><span class="token plain"> </span><span class="token class-name">DiscordClientBuilder</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">create</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain">token</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">            </span><span class="token comment" style="color:#808080">// globally suppress any not found (404) error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">            </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">onClientResponse</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">ResponseFunction</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">emptyIfNotFound</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">            </span><span class="token comment" style="color:#808080">// bad requests (400) while adding reactions will be suppressed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">            </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">onClientResponse</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">ResponseFunction</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">emptyOnErrorStatus</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">                    </span><span class="token class-name">RouteMatcher</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">route</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">Routes</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token constant" style="color:#9876aa">REACTION_CREATE</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token number" style="color:#6897bb">400</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">            </span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">            </span><span class="token comment" style="color:#808080">// server error (500) while creating a message will be retried with backoff</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">            </span><span class="token comment" style="color:#808080">// until it succeeds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">            </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">onClientResponse</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">                </span><span class="token class-name">ResponseFunction</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">retryWhen</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">                        </span><span class="token class-name">RouteMatcher</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">route</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">Routes</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token constant" style="color:#9876aa">MESSAGE_CREATE</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">                        </span><span class="token class-name">Retry</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">onlyIf</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">ClientException</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">isRetryContextStatusCode</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token number" style="color:#6897bb">500</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">                            </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">exponentialBackoffWithJitter</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">                                </span><span class="token class-name">Duration</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">ofSeconds</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token number" style="color:#6897bb">2</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">,</span><span class="token plain"> </span><span class="token class-name">Duration</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">ofSeconds</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token number" style="color:#6897bb">10</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">                            </span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">                </span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">            </span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">            </span><span class="token comment" style="color:#808080">// wait 1 second and retry any server error (500)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">            </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">onClientResponse</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token class-name">ResponseFunction</span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">retryOnceOnErrorStatus</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token number" style="color:#6897bb">500</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">            </span><span class="token punctuation" style="color:#a9b7c6">.</span><span class="token function" style="color:#ffc66d">build</span><span class="token punctuation" style="color:#a9b7c6">(</span><span class="token punctuation" style="color:#a9b7c6">)</span><span class="token punctuation" style="color:#a9b7c6">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain">    </span><span class="token punctuation" style="color:#a9b7c6">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#a9b7c6"><span class="token plain"></span><span class="token punctuation" style="color:#a9b7c6">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Each time <code>onClientResponse</code> is called, you&#x27;re adding a strategy to transform each response made by the <code>DiscordClient</code>. If an error occurs, Discord4J processes the error through the following handlers:</p>
<ol>
<li>Handle rate limiting errors (429), these cannot be modified.</li>
<li>Handle the errors using the ones installed by <code>onClientResponse</code>.</li>
<li>Handle server errors (500s) and retry them using exponential backoff.</li>
</ol>
<p>The first handler that matches will consume the error and apply its strategy, meaning that the order of declaration is important.</p>
<p>You can look at the <a href="https://www.javadoc.io/doc/com.discord4j/discord4j-rest/latest/discord4j/rest/response/ResponseFunction.html" target="_blank" rel="noopener noreferrer"><code>ResponseFunction</code></a> class for commonly used error handlers. A version covering all requests is available, but also a version allowing you to apply the handler to only some API Routes, with the support of <a href="https://www.javadoc.io/doc/com.discord4j/discord4j-rest/latest/discord4j/rest/request/RouteMatcher.html" target="_blank" rel="noopener noreferrer"><code>RouteMatcher</code></a>. Explore the <a href="https://www.javadoc.io/doc/com.discord4j/discord4j-rest/latest/index.html" target="_blank" rel="noopener noreferrer">Javadocs</a> for the rest module to understand more.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/Discord4J/documentation/edit/master/docs/04-How-to Guides/error-handling.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2021-09-17T22:34:31.000Z" itemprop="dateModified">Sep 17, 2021</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/embeds"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Embeds</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/logging"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Logging</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#handling-errors" class="table-of-contents__link toc-highlight">Handling Errors</a><ul><li><a href="#accept-the-error" class="table-of-contents__link toc-highlight">Accept the error</a></li><li><a href="#catch-and-return-a-static-default-value-onerrorreturn" class="table-of-contents__link toc-highlight">Catch and return a static default value: <code>onErrorReturn</code></a></li><li><a href="#catch-and-execute-an-alternative-path-with-a-fallback-method-onerrorresume" class="table-of-contents__link toc-highlight">Catch and execute an alternative path with a fallback method: <code>onErrorResume</code></a></li><li><a href="#catch-and-rethrow-onerrormap" class="table-of-contents__link toc-highlight">Catch and Rethrow: <code>onErrorMap</code></a></li><li><a href="#retrying-retry-retrywhen" class="table-of-contents__link toc-highlight">Retrying: <code>retry</code>, <code>retryWhen</code></a></li><li><a href="#catch-and-continue-mode" class="table-of-contents__link toc-highlight">Catch and continue mode</a></li></ul></li><li><a href="#error-sources" class="table-of-contents__link toc-highlight">Error Sources</a></li><li><a href="#handling-errors-across-multiple-requests-using-discord4j" class="table-of-contents__link toc-highlight">Handling errors across multiple requests using Discord4J</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Discord4J Docs</a></li><li class="footer__item"><a href="https://javadoc.io/doc/com.discord4j/discord4j-core" target="_blank" rel="noopener noreferrer" class="footer__link-item">Javadocs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Discord4J/Discord4J" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://projectreactor.io/docs/core/release/reference/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reactor Reference Guide<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.com/developers/docs/intro" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/d4j" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item">
              <a href="https://www.netlify.com">
                <img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="Deploys by Netlify">
              </a>
              </li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2015 - 2024 Discord4J - Licensed under LGPLv3.</div></div></div></footer></div>
</body>
</html>